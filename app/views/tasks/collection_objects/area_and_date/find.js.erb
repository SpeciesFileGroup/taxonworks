var html;
html = $('<%= escape_javascript(render(partial: 'result_list',
                                       locals:  {collection_objects: @collection_objects})) %>');
$("#show_list").html(html);

var message, collection_objects_count, feature_collection;
message = $('<%= escape_javascript(@package[:message]) %>');
if (message.length == 0) {
  collection_objects_count = $('<%= escape_javascript(@package[:collection_objects_count]) %>');
  $("#result_span").text("Total: " + collection_objects_count);
}
else {
  $("#result_span").text(message);
}

//feature_collection = $('<%#= escape_javascript(@package[:feature_collection].as_json) %>');
if (feature_collection) {
  if ($("#show_map").attr("hidden") != "hidden") {
    result_map = TW.vendor.lib.google.maps.initializeMap('simple_map_canvas', result_collection);
  }
}

