// j is an alias for escape_javascript
var html;
html = $('<%= j(render(partial: 'result_list',
                       locals:  {collection_objects: @collection_objects})) %>');
$("#show_list").html(html);

var paging;
paging = $('<%= j(render(partial: 'paging_data')) %>');
$("#paging_span").html(paging);

var message, collection_objects_count, feature_collection;
message = $('<%= @package[:message] %>').selector;
if (message.length == 0) {
  collection_objects_count = $('<%= @package[:collection_objects_count] %>').selector;
  $("#result_span").text("Total: " + collection_objects_count);
}
else {
  $("#result_span").text(message);
}

result_collection = <%= @package[:feature_collection].to_json.html_safe %>;
if (result_collection) {
  if ($("#show_map").attr("hidden") != "hidden") {
    result_map = TW.vendor.lib.google.maps.initializeMap('simple_map_canvas', result_collection);
  }
}

